import{r as l,j as e,N as g,a as j,C as p}from"./index-BgW-1nVu.js";import{generateKnowledgeGraph as N}from"./geminiService-CxjPenrf.js";const w=({files:o})=>{const[a,f]=l.useState([]),[c,d]=l.useState(!1),[r,x]=l.useState(null);l.useEffect(()=>{o.length>0&&a.length===0&&h()},[o]);const h=async()=>{d(!0);const t=(await N(o)).map(n=>({...n,x:Math.random()*800+100,y:Math.random()*500+50}));f(t),d(!1)},m=l.useMemo(()=>{const s=new Map;return a.forEach(t=>{s.set(t.id,t)}),s},[a]),u=l.useMemo(()=>{const s=[];return a.forEach(t=>{t.connections.forEach(n=>{const i=m.get(n);i&&t.x&&t.y&&i.x&&i.y&&s.push(e.jsx("line",{x1:t.x,y1:t.y,x2:i.x,y2:i.y,stroke:"#e2e8f0",strokeWidth:"1",className:"opacity-50"},`${t.id}-${n}`))})}),s},[a,m]);return e.jsxs("div",{className:"h-full flex flex-col bg-slate-950 text-white overflow-hidden relative",children:[e.jsxs("div",{className:"absolute top-6 left-6 z-10 flex flex-col gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(g,{className:"w-6 h-6 text-indigo-400"}),"Knowledge Universe"]}),e.jsxs("p",{className:"text-slate-400 text-sm",children:["Visualizing ",a.length," concepts across your life."]})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs("button",{onClick:h,disabled:c,className:"px-4 py-2 bg-indigo-600/20 hover:bg-indigo-600/40 border border-indigo-500/50 rounded-lg text-sm font-bold text-indigo-300 transition-colors flex items-center gap-2",children:[c?e.jsx(j,{className:"w-4 h-4 animate-spin"}):e.jsx(p,{className:"w-4 h-4"}),c?"Scanning...":"Re-Scan Sources"]})})]}),e.jsx("div",{className:"flex-1 relative cursor-move",children:e.jsxs("svg",{className:"w-full h-full",children:[e.jsx("defs",{children:e.jsxs("radialGradient",{id:"nodeGradient",cx:"50%",cy:"50%",r:"50%",fx:"50%",fy:"50%",children:[e.jsx("stop",{offset:"0%",stopColor:"#818cf8"}),e.jsx("stop",{offset:"100%",stopColor:"#4f46e5",stopOpacity:"0.5"})]})}),e.jsx("pattern",{id:"grid",width:"40",height:"40",patternUnits:"userSpaceOnUse",children:e.jsx("path",{d:"M 40 0 L 0 0 0 40",fill:"none",stroke:"#1e293b",strokeWidth:"0.5"})}),e.jsx("rect",{width:"100%",height:"100%",fill:"url(#grid)"}),u,a.map(s=>e.jsxs("g",{transform:`translate(${s.x},${s.y})`,onClick:()=>x(s),className:"cursor-pointer hover:opacity-80 transition-opacity",children:[e.jsx("circle",{r:20+s.mastery/5,fill:"url(#nodeGradient)",className:"animate-pulse",style:{animationDuration:"3s"}}),e.jsx("text",{y:35,textAnchor:"middle",fill:"white",className:"text-xs font-medium pointer-events-none select-none shadow-black drop-shadow-md",children:s.label})]},s.id))]})}),r&&e.jsxs("div",{className:"absolute right-6 top-6 w-80 bg-slate-900/90 backdrop-blur-xl border border-slate-700 rounded-2xl p-6 shadow-2xl animate-slideLeft",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:r.label}),e.jsx("button",{onClick:()=>x(null),className:"text-slate-400 hover:text-white",children:e.jsx(p,{className:"w-5 h-5 rotate-45"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Category"}),e.jsx("p",{className:"text-indigo-400",children:r.category})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Mastery Level"}),e.jsx("div",{className:"w-full bg-slate-800 h-2 rounded-full mt-2",children:e.jsx("div",{className:"bg-indigo-500 h-full rounded-full",style:{width:`${r.mastery}%`}})}),e.jsxs("p",{className:"text-right text-xs text-slate-400 mt-1",children:[r.mastery,"%"]})]}),e.jsx("div",{className:"pt-4 border-t border-slate-800",children:e.jsx("button",{className:"w-full py-2 bg-white text-slate-900 rounded-lg font-bold hover:bg-slate-200 transition-colors",children:"Inspect Concept"})})]})]})]})};export{w as default};
