import{r as s,j as e,I as A,V as G,M as E,a as S,P as _,S as z}from"./index-BgW-1nVu.js";import{generateImage as Q,generateVideoPlan as X,generateVideoClip as Z}from"./geminiService-CxjPenrf.js";const se=()=>{const[d,W]=s.useState("images"),[g,$]=s.useState("ultra-detailed concept art of a student exploring a glowing knowledge nebula, cinematic lighting"),[k,B]=s.useState("cinematic"),[C,I]=s.useState(null),[p,V]=s.useState(!1),[P,R]=s.useState(null),[u,D]=s.useState("30s study motivation reel blending fast cuts of notes, whiteboards, and a calm narrator voice."),[i,L]=s.useState(null),[T,b]=s.useState(null),[O,l]=s.useState(""),[c,x]=s.useState(!1),[o,U]=s.useState("Focus for 25 minutes, then take a 5 minute break. Ready?"),[F,f]=s.useState(!1),[m,w]=s.useState(!1),j=s.useRef(null),v=typeof window<"u"&&"speechSynthesis"in window,h=s.useMemo(()=>typeof window>"u"?!1:!!(window.SpeechRecognition||window.webkitSpeechRecognition),[]);s.useEffect(()=>{if(!h)return;const t=window.SpeechRecognition||window.webkitSpeechRecognition,a=new t;a.continuous=!1,a.interimResults=!0,a.lang="en-US",a.onresult=N=>{let y="";for(let n=N.resultIndex;n<N.results.length;n++)y+=N.results[n][0].transcript;U(n=>n.trim()?`${n} ${y}`:y)},a.onstart=()=>w(!0),a.onend=()=>w(!1),a.onerror=()=>w(!1),j.current=a},[h]);const M=async()=>{V(!0),R(null),I(null);try{const t=await Q(`${g}
Style: ${k}`);I(t)}catch(t){R((t==null?void 0:t.message)||"Failed to generate image")}finally{V(!1)}},q=async()=>{x(!0),l("Drafting storyboard..."),L(null),b(null);try{const t=await X(u);L(t),l("Storyboard ready")}catch(t){l((t==null?void 0:t.message)||"Could not build plan")}finally{x(!1)}},H=async()=>{if(i){x(!0),l("Rendering clip (beta)..."),b(null);try{const t=await Z(i);b(t||null),l(t?"Video ready":"Video queued, no URL returned")}catch(t){l((t==null?void 0:t.message)||"Video generation failed")}finally{x(!1)}}},J=()=>{if(!v||!o.trim())return;window.speechSynthesis.cancel();const t=new SpeechSynthesisUtterance(o);t.onstart=()=>f(!0),t.onend=()=>f(!1),window.speechSynthesis.speak(t)},K=()=>{!j.current||m||j.current.start()},Y=()=>{window.speechSynthesis.cancel(),f(!1)},r=t=>e.jsx("span",{className:"inline-flex items-center text-[11px] font-bold uppercase tracking-wide px-2 py-1 rounded-full bg-slate-900 text-white",children:t});return e.jsxs("div",{className:"p-6 md:p-10 max-w-6xl mx-auto space-y-6 animate-fadeIn",children:[e.jsxs("header",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[r("Creative OS"),e.jsx("span",{className:"text-xs text-slate-500",children:"Images · Video · Voice"})]}),e.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Creative Studio"}),e.jsx("p",{className:"text-slate-600 max-w-3xl",children:"Ship visuals, storyboards, and spoken feedback without leaving Study OS. Powered by your active AI provider with in-browser voice."})]}),e.jsx("div",{className:"bg-white border border-slate-200 rounded-2xl p-2 flex flex-wrap gap-2",children:[{id:"images",label:"Image Forge",icon:e.jsx(A,{className:"w-4 h-4"})},{id:"video",label:"Video Lab",icon:e.jsx(G,{className:"w-4 h-4"})},{id:"voice",label:"Voice Booth",icon:e.jsx(E,{className:"w-4 h-4"})}].map(t=>e.jsxs("button",{onClick:()=>W(t.id),className:`flex items-center gap-2 px-3 py-2 rounded-xl text-sm font-semibold transition-all ${d===t.id?"bg-indigo-600 text-white shadow-md":"text-slate-600 hover:bg-slate-100"}`,children:[t.icon,t.label]},t.id))}),d==="images"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white border border-slate-200 rounded-2xl p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Prompt"}),r("Imagen")]}),e.jsx("textarea",{value:g,onChange:t=>$(t.target.value),rows:5,className:"w-full rounded-xl border border-slate-200 bg-slate-50 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-200"}),e.jsx("div",{className:"flex gap-3",children:e.jsxs("label",{className:"text-sm text-slate-600 font-medium flex-1",children:["Style",e.jsxs("select",{value:k,onChange:t=>B(t.target.value),className:"mt-1 w-full border border-slate-200 rounded-xl px-3 py-2 bg-white text-sm",children:[e.jsx("option",{value:"cinematic",children:"Cinematic"}),e.jsx("option",{value:"watercolor",children:"Watercolor"}),e.jsx("option",{value:"isometric UI",children:"Isometric UI"}),e.jsx("option",{value:"notebook sketch",children:"Notebook Sketch"}),e.jsx("option",{value:"retro poster",children:"Retro Poster"})]})]})}),e.jsxs("button",{onClick:M,disabled:p||!g.trim(),className:"w-full bg-indigo-600 text-white font-bold py-3 rounded-xl shadow-lg shadow-indigo-500/30 hover:bg-indigo-500 transition disabled:opacity-60 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[p&&e.jsx(S,{className:"w-4 h-4 animate-spin"}),p?"Generating...":"Generate Image"]}),P&&e.jsx("p",{className:"text-sm text-red-600",children:P})]}),e.jsxs("div",{className:"bg-slate-900 text-white rounded-2xl min-h-[360px] flex items-center justify-center overflow-hidden relative",children:[C?e.jsx("img",{src:C,alt:"AI render",className:"w-full h-full object-cover"}):e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx(A,{className:"w-10 h-10 mx-auto text-indigo-200"}),e.jsx("p",{className:"text-sm text-indigo-100",children:"Your renders land here."})]}),e.jsx("div",{className:"absolute top-4 right-4 bg-white/10 backdrop-blur px-3 py-1 rounded-full text-xs font-semibold",children:"High-res JPG · ready to download"})]})]}),d==="video"&&e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"xl:col-span-2 bg-white border border-slate-200 rounded-2xl p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Storyboard Prompt"}),r("Veo 2")]}),e.jsx("textarea",{value:u,onChange:t=>D(t.target.value),rows:5,className:"w-full rounded-xl border border-slate-200 bg-slate-50 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-200"}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsx("button",{onClick:q,disabled:c||!u.trim(),className:"px-4 py-3 bg-indigo-600 text-white font-bold rounded-xl hover:bg-indigo-500 transition shadow-lg shadow-indigo-500/30 disabled:opacity-60",children:c?"Thinking...":"Draft Shot Plan"}),e.jsx("button",{onClick:H,disabled:c||!i,className:"px-4 py-3 bg-emerald-600 text-white font-bold rounded-xl hover:bg-emerald-500 transition shadow-lg shadow-emerald-500/30 disabled:opacity-60",children:c?"Rendering...":"Render Short Clip"}),e.jsx("span",{className:"text-xs text-slate-500 self-center",children:O})]}),i&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"font-bold text-slate-900",children:"Shot List"}),e.jsxs("span",{className:"text-xs text-slate-500",children:[i.durationSeconds,"s total"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:i.shots.map(t=>e.jsxs("div",{className:"p-4 border border-slate-200 rounded-xl bg-slate-50",children:[e.jsxs("p",{className:"text-[11px] font-bold uppercase text-indigo-600 mb-1",children:["Scene ",t.id]}),e.jsx("h5",{className:"font-semibold text-slate-900",children:t.title}),e.jsx("p",{className:"text-sm text-slate-600 mt-1",children:t.visual}),e.jsxs("p",{className:"text-xs text-slate-500 mt-2",children:["VO: ",t.voiceover]}),e.jsxs("div",{className:"text-[11px] font-semibold text-slate-400 mt-2",children:[t.durationSeconds,"s"]})]},t.id))}),e.jsxs("div",{className:"p-4 rounded-xl bg-emerald-50 text-emerald-700 text-sm font-semibold",children:["CTA: ",i.callToAction]})]}),T&&e.jsxs("div",{className:"mt-4 bg-slate-900 text-white rounded-xl p-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-200",children:"Clip ready"}),e.jsx("a",{href:T,target:"_blank",rel:"noreferrer",className:"text-indigo-200 underline text-sm",children:"Open generated video"})]}),e.jsx(G,{className:"w-6 h-6 text-indigo-200"})]})]}),e.jsxs("div",{className:"bg-slate-900 text-white rounded-2xl p-6 flex flex-col gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-indigo-200 uppercase font-bold mb-1",children:"Recipe"}),e.jsx("h3",{className:"text-xl font-bold",children:"Learning Reel Blueprint"})]}),e.jsxs("ul",{className:"space-y-2 text-sm text-indigo-100",children:[e.jsx("li",{children:"• Hook in 3 seconds, display goal metric."}),e.jsx("li",{children:"• Alternate text overlays with quick B-roll."}),e.jsx("li",{children:"• Keep captions high contrast and large."}),e.jsx("li",{children:"• End with a one-line CTA."})]}),e.jsx("div",{className:"mt-auto text-xs text-indigo-200/80",children:"Uses Gemini generateContent for the storyboard and Veo for rendering (beta). Works best with your Google API key saved in Chat."})]})]}),d==="voice"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white border border-slate-200 rounded-2xl p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Voice Script"}),r("TTS")]}),e.jsx("textarea",{value:o,onChange:t=>U(t.target.value),rows:6,className:"w-full rounded-xl border border-slate-200 bg-slate-50 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-200",placeholder:"Write or dictate what you want to hear..."}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:J,disabled:!v||!o.trim(),className:"px-4 py-3 bg-indigo-600 text-white font-bold rounded-xl shadow-lg shadow-indigo-500/30 hover:bg-indigo-500 transition disabled:opacity-60 flex items-center gap-2",children:[F?e.jsx(S,{className:"w-4 h-4 animate-spin"}):e.jsx(_,{className:"w-4 h-4"}),"Speak"]}),e.jsxs("button",{onClick:Y,className:"px-4 py-3 bg-white border border-slate-200 text-slate-700 font-bold rounded-xl hover:bg-slate-50 transition flex items-center gap-2",children:[e.jsx(z,{className:"w-4 h-4"}),"Stop"]})]}),!v&&e.jsx("p",{className:"text-sm text-red-600",children:"Speech synthesis not supported in this browser."})]}),e.jsxs("div",{className:"bg-slate-900 text-white rounded-2xl p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-bold",children:"Dictate"}),r("STT")]}),e.jsx("p",{className:"text-indigo-100 text-sm",children:"Turn your spoken ideas into prompts. We keep it on-device via Web Speech API."}),e.jsxs("button",{onClick:K,disabled:!h||m,className:"px-4 py-3 bg-emerald-500 text-white font-bold rounded-xl shadow-lg shadow-emerald-500/30 hover:bg-emerald-400 transition disabled:opacity-60 flex items-center gap-2",children:[m?e.jsx(S,{className:"w-4 h-4 animate-spin"}):e.jsx(E,{className:"w-4 h-4"}),m?"Listening...":"Start Dictation"]}),!h&&e.jsx("p",{className:"text-sm text-amber-200",children:"Speech recognition not supported in this browser."}),e.jsx("div",{className:"bg-white/10 rounded-xl p-4 text-sm text-indigo-50 min-h-[140px] whitespace-pre-wrap",children:o||"Transcript will appear here."})]})]})]})};export{se as default};
